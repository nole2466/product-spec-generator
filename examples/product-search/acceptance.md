# Acceptance: 商品搜尋

> 驗收標準文件

---

## Metadata

| 項目 | 內容 |
|-----|------|
| 功能 ID | FE-001 |
| 功能名稱 | 商品搜尋 |
| Spec | [spec.md](./spec.md) |
| 負責 QA | @qa-emma |
| 建立日期 | 2024-01-25 |
| 狀態 | Approved |

---

## 1. 測試範圍

### 1.1 In Scope

- 關鍵字搜尋
- 搜尋建議
- 搜尋結果顯示
- 篩選功能
- 排序功能
- 分頁功能

### 1.2 Out of Scope

- 語音搜尋（Phase 2）
- 圖片搜尋（Phase 3）
- 搜尋歷史（Phase 2）

---

## 2. 測試環境

| 項目 | 規格 |
|-----|------|
| 測試環境 | Staging |
| API 版本 | v1 |
| 測試資料 | 10,000 筆商品 |

### 測試帳號

| 帳號 | 密碼 | 角色 | 用途 |
|-----|------|------|------|
| test@example.com | Test1234! | 一般用戶 | 基本功能測試 |
| guest | - | 訪客 | 未登入測試 |

---

## 3. 功能測試案例

### 3.1 關鍵字搜尋

#### TC-001: 基本搜尋

| 項目 | 內容 |
|-----|------|
| **前置條件** | 用戶在任意頁面 |
| **優先級** | P0 |

**測試步驟**：
1. 點擊搜尋框
2. 輸入「iPhone」
3. 按下 Enter 或點擊搜尋按鈕

**預期結果**：
- 跳轉到搜尋結果頁
- URL 為 `/search?q=iPhone`
- 顯示包含 iPhone 的商品
- 顯示總筆數

---

#### TC-002: 空白搜尋

| 項目 | 內容 |
|-----|------|
| **前置條件** | 用戶在搜尋框 |
| **優先級** | P0 |

**測試步驟**：
1. 不輸入任何文字
2. 點擊搜尋按鈕

**預期結果**：
- 不執行搜尋
- 搜尋框顯示提示「請輸入搜尋關鍵字」

---

#### TC-003: 繁簡體搜尋

| 項目 | 內容 |
|-----|------|
| **前置條件** | 資料庫有「手機」相關商品 |
| **優先級** | P1 |

**測試步驟**：
1. 輸入「手机」（簡體）
2. 執行搜尋

**預期結果**：
- 能找到「手機」（繁體）相關商品

---

### 3.2 搜尋建議

#### TC-004: 顯示搜尋建議

| 項目 | 內容 |
|-----|------|
| **前置條件** | 用戶在搜尋框 |
| **優先級** | P0 |

**測試步驟**：
1. 輸入「iPh」
2. 等待 300ms

**預期結果**：
- 顯示搜尋建議下拉選單
- 建議包含「iPhone 15」「iPhone 15 Pro」等
- 輸入的文字被高亮顯示

---

#### TC-005: 點擊搜尋建議

| 項目 | 內容 |
|-----|------|
| **前置條件** | 搜尋建議已顯示 |
| **優先級** | P0 |

**測試步驟**：
1. 點擊「iPhone 15」建議項目

**預期結果**：
- 執行搜尋「iPhone 15」
- 跳轉到搜尋結果頁

---

#### TC-006: 鍵盤選擇建議

| 項目 | 內容 |
|-----|------|
| **前置條件** | 搜尋建議已顯示 |
| **優先級** | P1 |

**測試步驟**：
1. 按下鍵盤 ↓ 選擇第一個建議
2. 按下 Enter

**預期結果**：
- 執行所選建議的搜尋

---

### 3.3 搜尋結果

#### TC-007: 顯示搜尋結果

| 項目 | 內容 |
|-----|------|
| **前置條件** | 搜尋「iPhone」有結果 |
| **優先級** | P0 |

**測試步驟**：
1. 搜尋「iPhone」

**預期結果**：
- 顯示商品卡片列表（2 欄）
- 每張卡片顯示：圖片、名稱、價格、評價
- 顯示總筆數「找到 X 件商品」

---

#### TC-008: 無搜尋結果

| 項目 | 內容 |
|-----|------|
| **前置條件** | 無 |
| **優先級** | P0 |

**測試步驟**：
1. 搜尋「xyzxyzxyz123」（不存在的關鍵字）

**預期結果**：
- 顯示空狀態
- 顯示「找不到『xyzxyzxyz123』相關商品」
- 顯示「試試其他關鍵字」或「瀏覽熱門商品」按鈕

---

#### TC-009: 點擊商品卡片

| 項目 | 內容 |
|-----|------|
| **前置條件** | 搜尋結果已顯示 |
| **優先級** | P0 |

**測試步驟**：
1. 點擊任一商品卡片

**預期結果**：
- 跳轉到商品詳情頁

---

### 3.4 篩選功能

#### TC-010: 價格範圍篩選

| 項目 | 內容 |
|-----|------|
| **前置條件** | 搜尋結果已顯示 |
| **優先級** | P1 |

**測試步驟**：
1. 點擊「價格」篩選按鈕
2. 輸入最低價「1000」、最高價「5000」
3. 點擊「套用篩選」

**預期結果**：
- 結果只顯示價格在 1000-5000 之間的商品
- 篩選按鈕顯示已篩選狀態

---

#### TC-011: 分類篩選

| 項目 | 內容 |
|-----|------|
| **前置條件** | 搜尋結果已顯示 |
| **優先級** | P1 |

**測試步驟**：
1. 點擊「分類」篩選按鈕
2. 選擇「手機殼」分類
3. 點擊「套用篩選」

**預期結果**：
- 結果只顯示手機殼分類的商品

---

#### TC-012: 清除篩選

| 項目 | 內容 |
|-----|------|
| **前置條件** | 已套用篩選 |
| **優先級** | P1 |

**測試步驟**：
1. 點擊「重置」按鈕

**預期結果**：
- 清除所有篩選條件
- 顯示原始搜尋結果

---

### 3.5 排序功能

#### TC-013: 價格排序

| 項目 | 內容 |
|-----|------|
| **前置條件** | 搜尋結果已顯示 |
| **優先級** | P1 |

**測試步驟**：
1. 點擊排序按鈕
2. 選擇「價格低到高」

**預期結果**：
- 結果按價格升冪排序
- 第一個商品價格最低

---

### 3.6 分頁功能

#### TC-014: 載入更多

| 項目 | 內容 |
|-----|------|
| **前置條件** | 搜尋結果超過 20 筆 |
| **優先級** | P0 |

**測試步驟**：
1. 滾動到列表底部

**預期結果**：
- 自動載入下一頁
- 顯示載入動畫
- 新商品追加到列表

---

## 4. 邊界測試

### 4.1 輸入驗證

| # | 欄位 | 測試值 | 預期結果 |
|:-:|-----|-------|---------|
| 1 | 搜尋關鍵字 | 空值 | 不執行搜尋，顯示提示 |
| 2 | 搜尋關鍵字 | 51 個字元 | 截斷為 50 字元或顯示錯誤 |
| 3 | 搜尋關鍵字 | 只有空白 | 不執行搜尋，顯示提示 |
| 4 | 搜尋關鍵字 | `<script>alert(1)</script>` | 被過濾，不執行腳本 |
| 5 | 最低價 | -100 | 顯示錯誤或自動修正為 0 |
| 6 | 最低價 | 大於最高價 | 顯示錯誤 |

### 4.2 數量限制

| # | 情境 | 測試方式 | 預期結果 |
|:-:|-----|---------|---------|
| 1 | 無搜尋結果 | 搜尋不存在的關鍵字 | 顯示空狀態 |
| 2 | 超過 1000 筆 | 搜尋常見關鍵字 | 分頁正常 |
| 3 | 單頁上限 | 確認每頁最多 20 筆 | 最多顯示 20 筆 |

---

## 5. 錯誤處理測試

| # | 情境 | 觸發方式 | 預期結果 |
|:-:|-----|---------|---------|
| 1 | 網路斷線 | 關閉網路 | 顯示「網路連線失敗」 |
| 2 | API 逾時 | Mock 延遲 10s | 顯示「請求逾時，請重試」 |
| 3 | 伺服器錯誤 | Mock 500 | 顯示「伺服器錯誤，請稍後再試」|

---

## 6. 狀態測試

| # | 狀態 | 觸發條件 | 預期畫面 |
|:-:|-----|---------|---------|
| 1 | Loading | 搜尋中 | 顯示 Skeleton 卡片 |
| 2 | Empty | 無搜尋結果 | 顯示空狀態圖示和建議 |
| 3 | Error | API 錯誤 | 顯示錯誤訊息和重試按鈕 |
| 4 | 載入更多 | 滾動到底部 | 顯示底部 Loading |

---

## 7. 相容性測試

### 7.1 瀏覽器（Web）

| 瀏覽器 | 版本 | 測試結果 |
|-------|------|:--------:|
| Chrome | 120+ | ⬜ |
| Safari | 17+ | ⬜ |
| Firefox | 120+ | ⬜ |
| Edge | 120+ | ⬜ |

### 7.2 裝置（App）

| 平台 | 版本 | 測試機型 | 測試結果 |
|-----|------|---------|:--------:|
| iOS | 15.0+ | iPhone 12 | ⬜ |
| iOS | 17.0+ | iPhone 15 | ⬜ |
| Android | API 26+ | Pixel 6 | ⬜ |
| Android | API 34 | Samsung S24 | ⬜ |

### 7.3 螢幕尺寸

| 尺寸 | 解析度 | 測試結果 |
|-----|-------|:--------:|
| Mobile | 375 x 667 | ⬜ |
| Mobile | 390 x 844 | ⬜ |
| Tablet | 768 x 1024 | ⬜ |
| Desktop | 1920 x 1080 | ⬜ |

---

## 8. 效能測試

| # | 項目 | 標準 | 測試結果 |
|:-:|-----|------|:--------:|
| 1 | 搜尋回應 | < 500ms | ⬜ |
| 2 | 建議回應 | < 200ms | ⬜ |
| 3 | 首次渲染 | < 1s | ⬜ |
| 4 | 動畫流暢度 | 60fps | ⬜ |

---

## 9. 安全性測試

| # | 項目 | 測試方式 | 預期結果 |
|:-:|-----|---------|---------|
| 1 | XSS | 輸入 `<script>alert(1)</script>` | 被過濾，不執行 |
| 2 | SQL Injection | 輸入 `'; DROP TABLE --` | 被過濾 |

---

## 10. 測試案例總覽

| 類型 | 數量 | P0 | P1 | P2 |
|-----|:----:|:--:|:--:|:--:|
| 功能測試 | 14 | 9 | 5 | 0 |
| 邊界測試 | 9 | 3 | 6 | 0 |
| 錯誤處理 | 3 | 3 | 0 | 0 |
| 狀態測試 | 4 | 4 | 0 | 0 |
| 相容性 | 10 | 4 | 6 | 0 |
| 效能測試 | 4 | 2 | 2 | 0 |
| 安全性 | 2 | 2 | 0 | 0 |
| **總計** | **46** | **27** | **19** | **0** |

---

## 11. 驗收標準

### 11.1 上線標準

- [x] 所有 P0 測試案例通過（27/27）
- [x] 95% 以上 P1 測試案例通過（18/19 = 95%）
- [x] 無已知 Critical/Major Bug
- [x] 效能符合標準（搜尋 < 500ms）

### 11.2 已知問題

| Bug ID | 等級 | 描述 | 處理方式 |
|--------|------|------|---------|
| BUG-001 | Minor | 極長商品名稱截斷位置不佳 | 下版修復 |

---

## 12. 相關文件

- [PRD](./prd.md)
- [Spec](./spec.md)
- [API 契約](./contract.md)

---

## 變更紀錄

| 日期 | 版本 | 變更內容 | 作者 |
|-----|------|---------|------|
| 2024-01-25 | 1.0 | 初版 | @qa-emma |
| 2024-02-20 | 1.1 | 更新測試結果 | @qa-emma |
